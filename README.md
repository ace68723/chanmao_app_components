# 馋猫APP2.3.3 release

| 版本号  | 2.3.3                  | Apple store版本号2.3.0 |
| :--- | ---------------------- | ------------------- |
| 时间   | March 27, 2017 14:30   |                     |
| 注意事项 | 数据库更新可能引起新老用户打开时app时闪退 |                     |

##重大更新

- 餐馆列表数据库结构重新设计，解决以下问题

  - 跳转微信回到APP会闪退
  - 区域餐馆错位
  - 推荐商家除了出现在点餐主页面置顶以外，分区不显示。
- 餐馆进入menu页面逻辑重构，解决以下问题
  - 主页点开餐馆下单时，item数量变为0，无法下单
  - 降低因为性能开销过大引起的闪退
  - 优化低性能手机的顺畅性 e.g. iphone6、安卓
  - 搜索页面载入闪退，卡顿
  - ux更加精细
- 开机首屏优化，解决以下问题
  - 增加首屏广告
  - 性能优化，增加流畅性，降低性能超出引起的闪退




## 发布延迟原因

##### 2.3.3的数据结构重新设计，与2.3.2的数据库的数据结构不一致，在数据迁移时产生数据冲突。

- 主要是为了修复餐馆数据错位的问题，重新设计了数据库结构。但现在用户在更新的时候，两个版本的数据库产生了冲突，目前发现的冲突的影响，一部分用户可能会闪退一次再次打开就好，也有可能有用户一直闪退。

- 解决方案：进行数据迁移，1.先将2.3.2的数据读取出来，按照2.3.3的数据结构存入数据库，将会产生一些垃圾数据。2.迁移完成后，更新餐馆列表时清空全部2.3.2数据。

#####首屏广告 开机动画 主页渲染 引起cpu overload，导致闪退

- 因为流程的增加，加大了手机硬件的性能需求，导致硬件性能不能满足，在较低性能的手机上频繁闪退
- 优化渲染顺序， 开始登陆 -> loading页-> 渲染主页 -> 渲染开机动画 -> 渲染首屏广告。
  先完成主页基本渲染，cpu使用率下降后，再渲染首屏广告。
  增加 1.5-2秒的启动时间。



## 功能 

- [x] 历史订单查询排版更新
- [x] 开机广告（需要和小新重新调整接口，计划March 10, Friday解决）
- [x] 首屏广告
- [x] 修改google maps api key
- [x] 统一控制app 版本号，显示以及接口
- [x] about us
- [ ] 详细下单确认
- [ ] 小红书（商家菜单分类）
- [ ] 在线支付（March 13-19完成开发和上线）
- [ ] 点餐页面搜索商家的功能
- [ ] 搜索功能键盘无法收起
- [ ] 搜索菜单输入框及搜索的历史记录


## Bug

- [x] 跳转微信回到APP会闪退
- [x] 打开APP每个页面显示白屏or蓝屏（餐馆loading不出来，banner广告蓝屏）
- [x] 商家图片不稳定错位
- [x] 第一次安装启动app 闪退 2.3.3数据库与2.3.2数据冲突
- [x] 首屏广告 开机动画 主页渲染 引起cpu overload，导致闪退
- [x] 主页点开餐馆下单时，item数量变为0，无法下单
- [x] 区域餐馆错位
- [x] 搜索页面载入闪退，卡顿
- [x] 登陆后，卡在全屏橙色页面 (存在复现的可能)
- [x] historylist 存在一秒内多次请求的可能 待验证(关闭30秒自动刷新)
- [ ] 从HOME地址更改到其他地址，搜索地址页面必须要下滑才能出现已存的默认地址
- [ ] iPhone5C SE点击返回键出现不稳定闪退
- [ ] iPhone 6搜索菜单出现不稳定闪退
- [ ] 登录页面完成登录后卡死
- [ ] 单号105930价格显示有bug，价格后面好多0



## UI


- [x] 关闭餐馆menu时，如果滑动不在最顶部，餐馆图片关闭时会产生错位

- [x] 主页滑动到顶部时，status bar 透明 

- [x] 增加更新时以及app启动时，白屏loading动画

- [x] 不同区餐馆列表 滑动时产生错位

- [x] 关闭餐馆返回餐馆列表时，餐馆图片错位

- [x] 修复进入home页面后顶部banner为蓝色

- [x] about us 页面删除商务合作电话，改为email
- [ ] 打开商家loading时，loading动画和时间重叠

- [ ] 输入地址时建议全栏可点击，现在点图标不激活，不方便（from小乔）



*以上未打勾的为未完成2.3.3计划更新的内容





# 馋猫APP checklist

## 功能
- [ ] 小红书（商家菜单分类）
- [ ] 在线支付（March 13-19完成开发和上线）
- [ ] 点餐页面搜索商家的功能
- [ ] 搜索功能键盘无法收起
- [ ] 搜索菜单输入框及搜索的历史记录
- [ ] 搜索餐馆
- [ ] 餐馆列表下拉刷新


## BUG

- [ ] 从HOME地址更改到其他地址，搜索地址页面必须要下滑才能出现已存的默认地址
- [ ] iPhone5C SE点击返回键出现不稳定闪退(无规律闪退)
- [ ] iPhone 6搜索菜单出现不稳定闪退(无规律闪退)
- [ ] 登录页面完成登录后卡死
- [ ] 单号105930价格显示有bug，价格后面好多0
- [ ] 主页图片点击后进入其他餐厅--不规律出现
- [ ] 打开app登陆后，餐馆页面可能为空白(并不能稳定复现)
- [ ] 下单完成后到历史订单页面的跳转loading时间太久



## UI

- [ ] 打开商家loading时，loading动画和时间重叠
- [ ] 输入地址时建议全栏可点击，现在点图标不激活，不方便（from小乔）
- [ ] 搜索页面ui更新 








# 馋猫APP2.3.2 release

| 版本号  | 2.3.2               | Apple store版本号2.3.0 |
| :--- | ------------------- | ------------------- |
| 时间   | March 9, 2017 18:00 |                     |
| 注意事项 |                     |                     |
|      |                     |                     |

## 功能

- [x] 首页图片无法点击

- [x] “查看订单”按钮不可使用

- [x] 登录页面“注册”和“忘记密码”不能用

- [x] 添加comments

- [x] 创建地址后默认地址为HOME

- [ ] 开机广告（需要和小新重新调整接口，计划March 10, Friday解决）

## Bug


- [x] 首页文章点开返回后蓝屏
- [ ] 跳转微信回到APP会闪退（待解决）

## UI

- [x] tab icon 已加
- [x] 主页所有广告餐馆信息
- [x] “关于我们”



# 馋猫APP checklist

## 功能

- [ ] 小红书（商家菜单分类）
- [ ] 在线支付（March 13-19完成开发和上线）
- [ ] 点餐页面搜索商家的功能
- [ ] 搜索功能键盘无法收起
- [ ] 搜索菜单输入框及搜索的历史记录
- [ ] 历史订单查询排版更新

## BUG


- [ ] 打开APP每个页面显示白屏or蓝屏（餐馆loading不出来，banner广告蓝屏）

- [ ] 商家图片不稳定错位

- [ ] 从HOME地址更改到其他地址，搜索地址页面必须要下滑才能出现已存的默认地址

- [ ] iPhone5C SE点击返回键出现不稳定闪退

- [ ] iPhone 6搜索菜单出现不稳定闪退

- [ ] 登录页面完成登录后卡死

- [ ] 单号105930价格显示有bug，价格后面好多0


## UI

- [ ] 打开商家loading时，loading动画和时间重叠
- [ ] 输入地址时建议全栏可点击，现在点图标不激活，不方便（from小乔）

